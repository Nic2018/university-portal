<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ booking.event_name }} - Details</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* RESET & BASE */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        
        /* --- UPDATED BODY BACKGROUND (Fintech Blue) --- */
        body { 
            display: flex; 
            height: 100vh; 
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364); /* Option 1 */
            overflow: hidden; 
        }

        /* --- SIDEBAR --- */
        .sidebar { width: 90px; background: #fff; display: flex; flex-direction: column; align-items: center; padding: 30px 0; box-shadow: 2px 0 20px rgba(0,0,0,0.03); z-index: 100; }
        .sidebar-icon { width: 50px; height: 50px; border-radius: 14px; display: flex; justify-content: center; align-items: center; color: #aeb9cc; font-size: 1.3rem; margin-bottom: 25px; transition: 0.3s; text-decoration: none; position: relative; }
        .sidebar-icon:hover { background: #f0f4ff; color: #4a6cf7; transform: translateY(-2px); }
        .sidebar-icon.active { background: linear-gradient(135deg, #4a6cf7 0%, #3451c7 100%); color: white; box-shadow: 0 8px 20px rgba(74, 108, 247, 0.4); }
        .sidebar-icon.logout { margin-top: auto; color: #ff6b6b; } 
        .sidebar-icon.logout:hover { background: #fff5f5; color: #d63031; }

        /* TOOLTIP */
        .sidebar-icon::after { content: attr(data-tooltip); position: absolute; left: 75px; top: 50%; transform: translateY(-50%) translateX(10px); background-color: #2d3436; color: white; padding: 6px 14px; border-radius: 8px; font-size: 0.85rem; font-weight: 500; white-space: nowrap; opacity: 0; visibility: hidden; transition: 0.2s; pointer-events: none; z-index: 100; }
        .sidebar-icon:hover::after { opacity: 1; visibility: visible; transform: translateY(-50%) translateX(0); }

        /* --- UPDATED MAIN CONTENT --- */
        .main-content { 
            flex: 1; 
            padding: 50px; 
            overflow-y: auto; 
            background: transparent; /* Changed to transparent */
            display: flex; 
            justify-content: center; 
            align-items: center; 
        }

        /* DETAIL CARD */
        .detail-card {
            background: white; width: 100%; max-width: 600px; padding: 40px; border-radius: 24px;
            box-shadow: 0 10px 40px -10px rgba(0,0,0,0.2); /* Slightly darker shadow for contrast */
            border: 1px solid #f1f5f9; position: relative;
        }

        .back-btn { position: absolute; top: 30px; left: 30px; text-decoration: none; color: #64748b; font-weight: 600; display: flex; align-items: center; gap: 8px; transition: 0.3s; }
        .back-btn:hover { color: #4a6cf7; transform: translateX(-5px); }

        .header-section { text-align: center; margin-top: 20px; margin-bottom: 30px; }
        .event-title { font-size: 2rem; font-weight: 700; color: #1e293b; margin-bottom: 5px; }
        .booking-id { color: #94a3b8; font-size: 0.9rem; font-weight: 500; }

        .status-badge { 
            display: inline-block; padding: 6px 16px; border-radius: 20px; font-size: 0.85rem; 
            font-weight: 700; text-transform: uppercase; margin-bottom: 20px;
        }

        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        .info-box { background: #f8fafc; padding: 20px; border-radius: 16px; border: 1px solid #e2e8f0; }
        .info-label { font-size: 0.8rem; color: #64748b; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px; }
        .info-value { font-size: 1.1rem; color: #334155; font-weight: 600; }

        /* --- SHARE BUTTONS --- */
        .share-section { border-top: 1px solid #f1f5f9; padding-top: 30px; }
        .share-title { font-size: 0.95rem; font-weight: 600; color: #1e293b; margin-bottom: 15px; text-align: center; }
        
        .share-buttons { display: flex; gap: 15px; justify-content: center; }
        
        .btn-share {
            flex: 1; padding: 12px; border-radius: 12px; border: none; font-weight: 600; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 8px; text-decoration: none;
            transition: 0.3s; color: white; font-size: 0.9rem;
        }

        .btn-copy { background: #334155; }
        .btn-copy:hover { background: #1e293b; transform: translateY(-2px); }

        .btn-whatsapp { background: #25D366; }
        .btn-whatsapp:hover { background: #22c35e; transform: translateY(-2px); }

        .btn-email { background: #ea4335; }
        .btn-email:hover { background: #d93025; transform: translateY(-2px); }

        /* Toast Notification */
        #toast {
            visibility: hidden; min-width: 250px; background-color: #333; color: #fff; text-align: center;
            border-radius: 8px; padding: 16px; position: fixed; z-index: 1000; left: 50%; bottom: 30px;
            transform: translateX(-50%); opacity: 0; transition: opacity 0.3s, bottom 0.3s;
        }
        #toast.show { visibility: visible; opacity: 1; bottom: 50px; }
    </style>
</head>
<body>

    <div class="sidebar">
        <a href="{% url 'dashboard' %}" class="sidebar-icon" data-tooltip="Dashboard"><i class="fas fa-home"></i></a>
        <a href="{% url 'my_bookings' %}" class="sidebar-icon" data-tooltip="My Bookings"><i class="fas fa-list-ul"></i></a>
        <a href="{% url 'calendar' %}" class="sidebar-icon" data-tooltip="View Schedule"><i class="fas fa-calendar-alt"></i></a>
        <a href="#" class="sidebar-icon active" data-tooltip="Details"><i class="fas fa-info-circle"></i></a>
        <a href="{% url 'venue_list' %}" class="sidebar-icon" data-tooltip="Campus Venues"><i class="fas fa-map-marker-alt"></i></a>
        <a href="{% url 'profile' %}" class="sidebar-icon" data-tooltip="Settings"><i class="fas fa-user-cog"></i></a>
        <a href="{% url 'logout' %}" class="sidebar-icon logout" data-tooltip="Log Out"><i class="fas fa-sign-out-alt"></i></a>
    </div>

    <div class="main-content">
        <div class="detail-card">
            <a href="{% url 'my_bookings' %}" class="back-btn"><i class="fas fa-arrow-left"></i> Back</a>

            <div class="header-section">
                {% if booking.status == 'APPROVED' %}
                    <span class="status-badge" style="background:#f0fdf4; color:#16a34a;">Approved</span>
                {% elif booking.status == 'REJECTED' %}
                    <span class="status-badge" style="background:#fef2f2; color:#dc2626;">Rejected</span>
                {% else %}
                    <span class="status-badge" style="background:#fffbeb; color:#d97706;">Pending</span>
                {% endif %}

                <h1 class="event-title">{{ booking.event_name }}</h1>
                <div class="booking-id">Booking #{{ booking.id }}</div>
            </div>

            <div class="info-grid">
                <div class="info-box">
                    <div class="info-label"><i class="fas fa-map-marker-alt"></i> Venue</div>
                    <div class="info-value">{{ booking.venue.name }}</div>
                </div>
                <div class="info-box">
                    <div class="info-label"><i class="fas fa-calendar-day"></i> Date</div>
                    <div class="info-value">{{ booking.start_time|date:"d M Y" }}</div>
                </div>
                <div class="info-box">
                    <div class="info-label"><i class="fas fa-clock"></i> Time</div>
                    <div class="info-value">{{ booking.start_time|date:"H:i" }} - {{ booking.end_time|date:"H:i" }}</div>
                </div>
                <div class="info-box">
                    <div class="info-label"><i class="fas fa-user"></i> Organizer</div>
                    <div class="info-value">{{ booking.user.first_name }}</div>
                </div>
            </div>

            {% if booking.description %}
            <div style="margin-bottom: 30px;">
                <div class="info-label">Description</div>
                <p style="color: #475569; font-size: 0.95rem; line-height: 1.6;">{{ booking.description }}</p>
            </div>
            {% endif %}

            <div class="share-section">
                <div class="share-title">Share Schedule Detail</div>
                <div class="share-buttons">
                    
                    <a href="https://api.whatsapp.com/send?text=ðŸ“… *Event Invite:* {{ booking.event_name }}%0AðŸ“ *Venue:* {{ booking.venue.name }}%0Aâ° *Time:* {{ booking.start_time|date:'d M Y, H:i' }}%0A%0ASee details here: {{ request.build_absolute_uri }}" target="_blank" class="btn-share btn-whatsapp">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>

                    <a href="mailto:?subject=Invitation: {{ booking.event_name }}&body=Hi,%0A%0AI'm sharing this event schedule with you:%0A%0AEvent: {{ booking.event_name }}%0AVenue: {{ booking.venue.name }}%0ATime: {{ booking.start_time|date:'d M Y, H:i' }}%0A%0ALink: {{ request.build_absolute_uri }}" class="btn-share btn-email">
                        <i class="fas fa-envelope"></i> Email
                    </a>

                    <button onclick="copyLink()" class="btn-share btn-copy">
                        <i class="fas fa-link"></i> Copy Link
                    </button>
                </div>
            </div>

        </div>
    </div>

    <div id="toast">Link copied to clipboard!</div>

    <script>
        function copyLink() {
            // Get the current page URL
            var url = window.location.href;
            
            // Copy to clipboard
            navigator.clipboard.writeText(url).then(function() {
                // Show "Copied" Toast
                var x = document.getElementById("toast");
                x.className = "show";
                setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
            });
        }
    </script>

</body>
</html>